#N canvas 401 15 791 667 10;
#X obj 204 147 tgl 35 0 empty empty Record_Loop1 0 -8 0 15 -258113
-1 -1 0 1;
#X obj 111 145 tgl 35 0 empty loop1_on Play_Loop1 0 -8 0 12 -260097
-1 -1 0 1;
#X obj 14 47 tgl 50 0 empty empty empty 17 7 0 10 -262144 -1 -1 1 1
;
#X obj 21 392 dac~;
#X text 11 6 Audio On/Off;
#N canvas 185 178 252 185 limiter 0;
#X obj 24 22 inlet~;
#X msg 121 85 limit 100;
#X obj 121 21 loadbang;
#X obj 24 60 z~ 64;
#X obj 24 169 *~;
#X obj 24 200 outlet~;
#X obj 121 113 limiter~ 10;
#X connect 0 0 3 0;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X restore 21 367 pd limiter;
#X obj 22 347 *~;
#X obj 66 313 line~;
#X obj 66 293 pack 0 5;
#X obj 66 272 r vol-output;
#X text 718 644 Inspired by Pierre Massat \, Guitar Extended \, 2013
;
#X obj 14 26 loadbang;
#N canvas 758 117 181 178 Main_on/off 0;
#X obj -20 15 inlet;
#X obj -20 111 s vol-output;
#X msg 7 77 \; pd dsp \$1;
#X obj -20 51 t f f;
#X connect 0 0 3 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X restore 14 101 pd Main_on/off;
#N canvas 0 0 450 300 (subpatch) 0;
#X array loop1 19008 float 2;
#X coords 0 1 19008 -1 150 60 1 0 0;
#X restore 111 62 graph;
#N canvas 239 129 753 538 play_loop1 0;
#X obj 73 26 inlet;
#X obj 154 176 spigot;
#X obj 73 76 sel 1 0;
#X msg 112 119 stop;
#X obj 73 51 t f f;
#X obj 154 201 s new_cycle;
#X obj 73 150 tabplay~ loop1;
#X obj 72 356 s~ main_out1;
#X obj 154 223 r new_cycle;
#X obj 72 330 *~;
#X obj 202 247 delay;
#X obj 229 204 r Loop1ms;
#X text 130 24 Toggle on sends a bang to start playback \, and turns
on spigot that retiggers when finished.;
#X text 197 293 this guy tries to remove the click when it restarts
(ramps down volume just before \, ramps up just after retrigger.;
#X obj 154 295 line~;
#X msg 73 119 bang;
#X obj 223 73 r p1_up;
#X msg 154 263 1 10;
#X msg 202 268 0 10;
#X obj 229 225 - 10;
#X connect 0 0 4 0;
#X connect 1 0 5 0;
#X connect 1 0 6 0;
#X connect 2 1 3 0;
#X connect 3 0 6 0;
#X connect 4 0 2 0;
#X connect 4 1 1 1;
#X connect 6 0 9 0;
#X connect 6 1 1 0;
#X connect 8 0 10 0;
#X connect 8 0 17 0;
#X connect 9 0 7 0;
#X connect 10 0 18 0;
#X connect 11 0 19 0;
#X connect 14 0 9 1;
#X connect 15 0 6 0;
#X connect 16 0 17 0;
#X connect 16 0 15 0;
#X connect 17 0 14 0;
#X connect 18 0 14 0;
#X connect 19 0 10 1;
#X restore 111 194 pd play_loop1;
#N canvas 693 175 625 579 Record_loop1 0;
#X obj 195 148 *~;
#X obj 228 124 line~;
#N canvas 185 178 252 332 limiter 0;
#X obj 24 22 inlet~;
#X msg 121 85 limit 100;
#X obj 121 21 loadbang;
#X obj 24 60 z~ 64;
#X obj 24 169 *~;
#X obj 24 200 outlet~;
#X obj 121 113 limiter~ 10;
#X connect 0 0 3 0;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X restore 195 173 pd limiter;
#X obj 194 198 tabwrite~ loop1;
#X obj 51 3 inlet;
#X obj 50 269 t f b;
#X obj 65 294 samplerate~;
#X obj 50 316 *;
#N canvas 330 257 450 300 into_blocks 0;
#X obj 173 101 % 64;
#X obj 146 81 t f f;
#X obj 146 121 -;
#X obj 146 59 int;
#X obj 146 17 inlet;
#X obj 146 167 outlet;
#X text 238 67 to be a multiple of the block size.;
#X text 238 49 Force the length of the tables;
#X text 134 261 Pierre Massat \, Guitar extended \, 2013;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X restore 50 339 pd into_blocks;
#X obj 50 244 / 1000;
#X obj 50 360 s l1_length;
#X obj 51 24 change;
#X obj 95 244 s Loop1ms;
#X obj 50 215 t f f;
#X obj 51 120 s p1_down;
#X obj 195 253 r p1_down;
#X obj 70 98 s p1_up;
#X obj 51 73 sel 1 0;
#X obj 49 149 r p1_down;
#X obj 94 170 r p1_up;
#X obj 51 49 t f f;
#X text 93 4 HOLD DOWN button to record.;
#X text 326 251 When pressed down:;
#X text 347 271 turn off playback;
#X text 349 283 Clear loop1;
#X text 349 296 Resize loop1 to 10 seconds?;
#X text 347 308 Turn off playback of loop2;
#X text 348 321 Clear loop 2;
#X text 329 358 When pressed up:;
#X text 345 379 Resize loops 1 and 2 to the length of time;
#X text 347 390 Turn loop1 on;
#X text 300 37 Variables: p1_up;
#X text 367 50 p1_down;
#X text 368 61 Loop1ms;
#X text 367 74 l1_length;
#X msg 193 392 \; loop1_on 1 \; loop1 resize \$1 \; loop2 resize \$1
\;;
#X obj 193 368 r l1_length;
#X msg 195 274 \; loop1_on 0 \; loop1 const 0 \; loop1 resize 441000
\; loop2_on 0 \; loop2 const 0 \;;
#X obj 228 102 pack 0 5;
#X obj 195 73 r~ Mic;
#X obj 49 192 realtime;
#X connect 0 0 2 0;
#X connect 1 0 0 1;
#X connect 2 0 3 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 5 1 6 0;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 9 0 5 0;
#X connect 11 0 20 0;
#X connect 13 0 9 0;
#X connect 13 1 12 0;
#X connect 15 0 37 0;
#X connect 17 0 14 0;
#X connect 17 0 3 0;
#X connect 17 1 16 0;
#X connect 18 0 40 0;
#X connect 19 0 40 1;
#X connect 20 0 17 0;
#X connect 20 1 38 0;
#X connect 36 0 35 0;
#X connect 38 0 1 0;
#X connect 39 0 0 0;
#X connect 40 0 13 0;
#X restore 204 196 pd Record_loop1;
#X obj 420 148 tgl 35 0 empty empty Record_Loop2 0 -8 0 15 -258113
-1 -1 0 1;
#N canvas 558 82 706 523 Record_loop2 0;
#X obj 9 41 inlet;
#X obj 9 72 change;
#X obj 208 323 *~;
#X obj 244 300 line~;
#N canvas 185 178 252 185 limiter 0;
#X obj 24 22 inlet~;
#X msg 121 85 limit 100;
#X obj 121 21 loadbang;
#X obj 24 60 z~ 64;
#X obj 24 169 *~;
#X obj 24 200 outlet~;
#X obj 121 113 limiter~ 10;
#X connect 0 0 3 0;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X restore 193 403 pd limiter;
#X obj 192 445 tabwrite~ loop2;
#X msg 82 326 stop;
#X obj 82 302 t b b;
#X obj 192 372 +~;
#X obj 191 347 r~ main_out2;
#X obj 24 171 r new_cycle;
#X msg 9 323 start \$1;
#X obj 24 280 *;
#X obj 39 238 samplerate~;
#X obj 24 217 t f b;
#X obj 9 148 t b b;
#X obj 9 300 i;
#X obj 39 259 / 1000;
#X obj 304 310 spigot;
#X obj 304 282 r new_cycle;
#X obj 24 196 timer;
#X msg 14 425 \; loop2 const 0;
#X text 11 383 Clears loop2 from button;
#X obj 14 402 r clear_l2;
#X obj 244 281 pack 0 5;
#X obj 9 123 sel 1 0;
#X obj 118 347 s loop2_on;
#X msg 118 324 1;
#X obj 9 96 t f f;
#X text 161 11 Explanation (from left to right);
#X text 165 28 (pressed down) Make sure I'm punching in at current
position of loop1 playback;
#X text 164 57 (let up) Stop recording and make sure loop2 is playing
when released;
#X text 166 87 0 or 1 - Turn on mic \, AND spigot that starts recording
at beggining of loop if playback starts back over;
#X obj 244 197 t f f;
#X obj 208 251 r~ Mic;
#X connect 0 0 1 0;
#X connect 1 0 28 0;
#X connect 2 0 8 1;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 7 1 27 0;
#X connect 8 0 4 0;
#X connect 9 0 8 0;
#X connect 10 0 20 0;
#X connect 11 0 5 0;
#X connect 12 0 16 1;
#X connect 13 0 17 0;
#X connect 14 0 12 0;
#X connect 14 1 13 0;
#X connect 15 0 16 0;
#X connect 15 1 20 1;
#X connect 16 0 11 0;
#X connect 17 0 12 1;
#X connect 18 0 5 0;
#X connect 19 0 18 0;
#X connect 20 0 14 0;
#X connect 23 0 21 0;
#X connect 24 0 3 0;
#X connect 25 0 15 0;
#X connect 25 1 7 0;
#X connect 27 0 26 0;
#X connect 28 0 25 0;
#X connect 28 1 33 0;
#X connect 33 0 24 0;
#X connect 33 1 18 1;
#X connect 34 0 2 0;
#X restore 420 200 pd Record_loop2;
#N canvas 0 0 450 300 (subpatch) 0;
#X array loop2 19008 float 2;
#X coords 0 1 19008 -1 150 60 1 0 0;
#X restore 330 64 graph;
#X obj 331 151 tgl 35 0 empty loop2_on Play_Loop2 0 -8 0 12 -260097
-1 -1 0 1;
#X obj 38 222 r~ main_out1;
#X obj 38 277 +~;
#X obj 54 244 r~ main_out2;
#N canvas 742 121 450 223 play_loop2 0;
#X obj 45 85 inlet;
#X obj 45 182 s~ main_out2;
#X obj 59 133 tabplay~ loop2;
#X obj 45 156 *~;
#X obj 59 110 r new_cycle;
#X text 41 68 Unless the toggle is off \, muting the signal.;
#X text 42 42 Apparantly it's always cycling through loop2 if loop1
is on.;
#X connect 0 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X restore 331 200 pd play_loop2;
#X obj 22 319 +~;
#N canvas 242 248 966 300 pedal_stuff 0;
#X obj 336 21 keyup;
#X obj 284 22 key;
#X msg 284 67 1;
#X msg 336 67 0;
#X obj 95 22 keyup;
#X obj 43 23 key;
#X msg 43 68 1;
#X msg 95 68 0;
#X obj 43 46 sel 97;
#X obj 95 45 sel 97;
#X obj 284 108 outlet;
#X obj 43 102 outlet;
#X obj 284 45 sel 103;
#X obj 335 44 sel 103;
#X obj 472 20 keyup;
#X obj 420 21 key;
#X msg 420 66 1;
#X msg 472 66 0;
#X obj 420 107 outlet;
#X obj 420 44 sel 108;
#X obj 471 43 sel 108;
#X text 38 172 I gutted a usb keyboard of all buttons but A \, G \,
L \, Enter \, 4 \, and + so I can press them with my foot.;
#X obj 588 15 keyup;
#X obj 536 16 key;
#X msg 588 61 0;
#X obj 537 103 outlet;
#X obj 587 38 sel 108;
#X obj 537 39 sel 43;
#X obj 208 24 keyup;
#X obj 156 25 key;
#X msg 208 70 0;
#X obj 157 101 outlet;
#X obj 157 48 sel 10;
#X obj 207 47 sel 10;
#X obj 712 17 keyup;
#X obj 659 18 key;
#X msg 712 63 0;
#X obj 661 105 outlet;
#X obj 711 40 sel 52;
#X obj 658 46 sel 52;
#X connect 0 0 13 0;
#X connect 1 0 12 0;
#X connect 2 0 10 0;
#X connect 3 0 10 0;
#X connect 4 0 9 0;
#X connect 5 0 8 0;
#X connect 6 0 11 0;
#X connect 7 0 11 0;
#X connect 8 0 6 0;
#X connect 9 0 7 0;
#X connect 12 0 2 0;
#X connect 13 0 3 0;
#X connect 14 0 20 0;
#X connect 15 0 19 0;
#X connect 16 0 18 0;
#X connect 19 0 16 0;
#X connect 20 0 17 0;
#X connect 22 0 26 0;
#X connect 23 0 27 0;
#X connect 26 0 24 0;
#X connect 27 0 25 0;
#X connect 28 0 33 0;
#X connect 29 0 32 0;
#X connect 32 0 31 0;
#X connect 33 0 30 0;
#X connect 34 0 38 0;
#X connect 35 0 39 0;
#X connect 38 0 36 0;
#X connect 39 0 37 0;
#X restore 295 10 pd pedal_stuff;
#X obj 465 162 bng 15 250 50 0 clear_l2 empty RESET_Loop2 0 -7 0 10
-262144 -1 -1;
#N canvas 185 297 450 300 distortion 0;
#X obj 142 22 inlet;
#X obj 238 68 adc~;
#X obj 238 111 clip~ -0.05 0.05;
#X obj 237 132 bp~ 3000 3;
#X obj 238 89 *~ 100;
#X obj 239 178 bp~ 3000 3;
#X obj 196 245 +~;
#X obj 114 189 adc~;
#X obj 143 234 *~;
#X obj 240 217 *~;
#X obj 158 194 == 0;
#X obj 197 274 s~ Mic;
#X obj 238 154 *~ 1.5;
#X obj 48 25 loadbang;
#X msg 49 47 0;
#X connect 0 0 9 1;
#X connect 0 0 10 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 12 0;
#X connect 4 0 2 0;
#X connect 5 0 9 0;
#X connect 6 0 11 0;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 9 0 6 1;
#X connect 10 0 8 1;
#X connect 12 0 5 0;
#X connect 13 0 14 0;
#X connect 14 0 10 0;
#X restore 511 96 pd distortion;
#X obj 511 74 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 21 201 r~ Mic;
#X text 178 352 "+" Turns on distortion;
#X text 176 337 "Enter" - Toggles on/off Loop 2;
#X text 176 323 "L" - clears loop 2;
#X text 175 309 "G" - loop 2 (stacks);
#X text 174 298 "A" - loop 1 (base beat);
#N canvas 132 276 450 300 to_do 0;
#X obj 54 39 bng 25 250 50 0 empty empty Reverse_me 0 -8 0 12 -262144
-1 -1;
#N canvas 700 305 448 296 reverse_me! 0;
#N canvas 175 136 691 422 reverse 0;
#X obj 120 109 bng 15 250 50 0 empty empty Reverse_me 18 7 0 8 -262144
-1 -1;
#X obj 120 200 until;
#X obj 186 228 + 1;
#X obj 154 228 f;
#X obj 145 176 s \$1-length;
#X obj 120 152 t f f f;
#X msg 244 172 resize \$1;
#X obj 520 51 sel;
#X obj 596 41 - 1;
#X obj 596 17 r \$1-length;
#X obj 154 254 t f f f;
#X obj 67 278 s \$1-eof;
#X obj 520 18 r \$1-eof;
#X obj 520 123 until;
#X obj 520 98 f;
#X obj 520 156 f;
#X obj 552 156 - 1;
#X obj 571 103 r \$1-length;
#X obj 539 74 r \$1-length;
#X obj 584 255 f;
#X obj 603 231 r \$1-length;
#X obj 584 304 mod;
#X obj 603 279 r \$1-length;
#X obj 614 255 + 1;
#X obj 520 181 t f b;
#X obj 571 126 - 1;
#X text 53 335 Copies array to a temporary location.;
#X msg 337 124 0;
#X obj 337 148 s clr2;
#X obj 463 110 r clr2;
#X obj 173 200 r clr2;
#X obj 120 42 inlet;
#X obj 471 368 sel 0;
#X text 515 377 Bang when done copying;
#X obj 471 390 outlet;
#X text 206 396 (Taken and adapted from Pd's help);
#X obj 120 128 arraysize loop2;
#X obj 173 281 tabread loop2;
#X obj 520 335 tabwrite loop2;
#X obj 75 308 tabwrite tempArray2;
#X obj 520 208 tabread tempArray2;
#X obj 244 196 s tempArray2;
#X obj 323 335 table tempArray2;
#X connect 0 0 27 0;
#X connect 0 0 36 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 2 0;
#X connect 3 0 10 0;
#X connect 5 0 1 0;
#X connect 5 1 4 0;
#X connect 5 2 6 0;
#X connect 6 0 41 0;
#X connect 7 0 14 0;
#X connect 8 0 7 1;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 10 1 37 0;
#X connect 10 2 39 1;
#X connect 12 0 7 0;
#X connect 13 0 15 0;
#X connect 14 0 13 0;
#X connect 15 0 16 0;
#X connect 15 0 24 0;
#X connect 16 0 15 1;
#X connect 17 0 25 0;
#X connect 18 0 14 1;
#X connect 19 0 21 0;
#X connect 19 0 23 0;
#X connect 20 0 19 1;
#X connect 21 0 38 1;
#X connect 22 0 21 1;
#X connect 23 0 19 1;
#X connect 24 0 32 0;
#X connect 24 0 40 0;
#X connect 24 1 19 0;
#X connect 25 0 15 1;
#X connect 27 0 28 0;
#X connect 29 0 15 1;
#X connect 30 0 3 1;
#X connect 31 0 0 0;
#X connect 32 0 34 0;
#X connect 36 0 5 0;
#X connect 37 0 39 0;
#X connect 40 0 38 0;
#X restore 48 143 pd reverse;
#X obj 48 101 t b b;
#X msg 78 167 0;
#X obj 48 121 del 5;
#X msg 48 167 1;
#X obj 48 195 s vol-output;
#X obj 48 79 inlet;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 1 1 2 0;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X connect 4 0 5 0;
#X connect 6 0 1 0;
#X restore 54 69 pd reverse_me!;
#N canvas 73 24 610 606 combine_both 0;
#X obj 19 51 inlet;
#X obj 19 82 change;
#X obj 203 402 *~;
#X obj 202 327 line~;
#N canvas 185 178 252 185 limiter 0;
#X obj 24 22 inlet~;
#X msg 121 85 limit 100;
#X obj 121 21 loadbang;
#X obj 24 60 z~ 64;
#X obj 24 169 *~;
#X obj 24 200 outlet~;
#X obj 121 113 limiter~ 10;
#X connect 0 0 3 0;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X restore 203 428 pd limiter;
#X msg 92 336 stop;
#X obj 92 312 t b b;
#X obj 245 374 +~;
#X obj 245 327 r~ main_out2;
#X obj 34 185 r new_cycle;
#X msg 19 333 start \$1;
#X obj 34 290 *;
#X obj 49 248 samplerate~;
#X obj 34 227 t f b;
#X obj 19 158 t b b;
#X obj 19 310 i;
#X obj 49 269 / 1000;
#X obj 34 206 timer;
#X msg 91 485 \; loop2 const 0;
#X obj 202 305 pack 0 5;
#X obj 19 133 sel 1 0;
#X obj 128 357 s loop2_on;
#X msg 128 334 1;
#X obj 19 106 t f f;
#X obj 202 455 tabwrite~ loop1;
#X obj 260 348 r~ main_out1;
#X text 153 37 I stole most of this from record_loop2 patch;
#X text 158 60 Instead of adding mic input to buffer \, I'm adding
both playback loops to loop 1;
#X connect 0 0 1 0;
#X connect 1 0 23 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 24 0;
#X connect 5 0 24 0;
#X connect 5 0 18 0;
#X connect 6 0 5 0;
#X connect 6 1 22 0;
#X connect 7 0 2 1;
#X connect 8 0 7 0;
#X connect 9 0 17 0;
#X connect 10 0 24 0;
#X connect 11 0 15 1;
#X connect 12 0 16 0;
#X connect 13 0 11 0;
#X connect 13 1 12 0;
#X connect 14 0 15 0;
#X connect 14 1 17 1;
#X connect 15 0 10 0;
#X connect 16 0 11 1;
#X connect 17 0 13 0;
#X connect 19 0 3 0;
#X connect 20 0 14 0;
#X connect 20 1 6 0;
#X connect 22 0 21 0;
#X connect 23 0 20 0;
#X connect 23 1 19 0;
#X connect 25 0 7 1;
#X restore 149 68 pd combine_both;
#X obj 149 36 tgl 25 0 empty empty Combine_Loops 0 -7 0 12 -262144
-1 -1 0 1;
#X text 119 139 (doesn't work yet);
#X connect 0 0 1 0;
#X connect 3 0 2 0;
#X restore 111 10 pd to_do;
#X connect 0 0 15 0;
#X connect 1 0 14 0;
#X connect 2 0 12 0;
#X connect 5 0 3 0;
#X connect 5 0 3 1;
#X connect 6 0 5 0;
#X connect 7 0 6 1;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X connect 11 0 2 0;
#X connect 16 0 17 0;
#X connect 19 0 23 0;
#X connect 20 0 21 0;
#X connect 21 0 24 1;
#X connect 22 0 21 1;
#X connect 24 0 6 0;
#X connect 25 0 0 0;
#X connect 25 1 19 0;
#X connect 25 2 16 0;
#X connect 25 3 26 0;
#X connect 25 4 28 0;
#X connect 25 5 1 0;
#X connect 28 0 27 0;
#X connect 29 0 24 0;
#X coords 0 667 1 666 85 60 0;
